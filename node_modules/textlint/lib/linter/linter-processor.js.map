{"version":3,"sources":["../../src/linter/linter-processor.js"],"names":[],"mappings":";AACA;;;;;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;IACqB,e;;;;;;AAKjB,aALiB,eAKjB,CAAY,SAAZ,EAAuB;AAAA,8BALN,eAKM;;AACnB,aAAK,SAAL,GAAiB,SAAjB;AACH;;;;;;;;;;;iBAPgB,e;;sCAgB6B;AAAA,gBAArC,MAAqC,QAArC,MAAqC;AAAA,gBAA7B,cAA6B,QAA7B,cAA6B;AAAA,gBAAb,UAAa,QAAb,UAAa;;AAC1C,kCAAO,UAAU,cAAV,IAA4B,UAAnC;;AAD0C,uCAER,KAAK,SAAL,CAAe,SAAf,CAAyB,WAAW,GAApC,CAFQ;;AAAA,gBAEnC,UAFmC,wBAEnC,UAFmC;AAAA,gBAEvB,WAFuB,wBAEvB,WAFuB;;AAG1C,kCAAO,OAAO,UAAP,KAAsB,UAAtB,IAAoC,OAAO,WAAP,KAAuB,UAAlE,EACI,sDADJ;AAEA,gBAAM,OAAO,yBAAe;AACxB,8BADwB;AAExB,8CAFwB;AAGxB;AAHwB,aAAf,CAAb;AAKA,mBAAO,qBAAW,OAAX,CAAmB,IAAnB,EAAyB,IAAzB,CAA8B,oBAAY;AAC7C,oBAAM,SAAS,YAAY,QAAZ,EAAsB,WAAW,QAAjC,CAAf;AACA,uBAAO,QAAP,GAAkB,mCAAe,OAAO,QAAtB,CAAlB;AACA,oBAAI,OAAO,QAAP,IAAmB,IAAvB,EAA6B;AACzB,2BAAO,QAAP,eAA4B,WAAW,GAAvC;AACH;AACD,sCAAO,OAAO,QAAP,IAAmB,OAAO,QAAP,CAAgB,MAAhB,IAA0B,CAApD,EAAuD,mDAAvD;AACA,uBAAO,MAAP;AACH,aARM,CAAP;AASH;;;WAnCgB,e;;;kBAAA,e","file":"linter-processor.js","sourcesContent":["// LICENSE : MIT\n\"use strict\";\nimport assert from \"assert\";\nimport LinterTask from \"../task/linter-task\";\nimport TaskRunner from \"../task/task-runner\";\nimport {filterMessages} from \"../shared/message-filter\";\nexport default class LinterProcessor {\n    /**\n     *\n     * @param {Processor} processor\n     */\n    constructor(processor) {\n        this.processor = processor;\n    }\n\n    /**\n     * Run linter process\n     * @param {Config} config\n     * @param {RuleCreatorSet} ruleCreatorSet\n     * @param {SourceCode} sourceCode\n     * @returns {Promise.<TextLintResult>}\n     */\n    process({config, ruleCreatorSet, sourceCode}) {\n        assert(config && ruleCreatorSet && sourceCode);\n        const {preProcess, postProcess} = this.processor.processor(sourceCode.ext);\n        assert(typeof preProcess === \"function\" && typeof postProcess === \"function\",\n            \"processor should implement {preProcess, postProcess}\");\n        const task = new LinterTask({\n            config,\n            ruleCreatorSet,\n            sourceCode\n        });\n        return TaskRunner.process(task).then(messages => {\n            const result = postProcess(messages, sourceCode.filePath);\n            result.messages = filterMessages(result.messages);\n            if (result.filePath == null) {\n                result.filePath = `<Unkown${sourceCode.ext}>`;\n            }\n            assert(result.filePath && result.messages.length >= 0, \"postProcess should return { messages, filePath } \");\n            return result;\n        });\n    }\n}\n"]}